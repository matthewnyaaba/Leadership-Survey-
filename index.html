<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Leadership Self-Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .rating-instructions {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }

        .section-header {
            background: #667eea;
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            margin-top: 30px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.2);
        }

        .section-score {
            background: #f0f4ff;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            border: 2px solid #667eea;
        }

        .section-score h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .rating-instructions h2 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }

        .rating-instructions h3 {
            color: #333;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .rating-scale-info {
            display: grid;
            gap: 8px;
        }

        .scale-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .scale-value {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            color: #333;
            font-weight: 500;
            margin-bottom: 8px;
        }

        input[type="text"],
        input[type="email"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus,
        input[type="email"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            transition: transform 0.2s;
        }

        .question:hover {
            transform: translateX(5px);
        }

        .question-text {
            color: #333;
            font-size: 1.05em;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .question-number {
            font-weight: bold;
            color: #667eea;
        }

        .rating-scale {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .rating-option {
            position: relative;
            flex: 1;
            min-width: 70px;
        }

        .rating-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .rating-option label {
            display: block;
            padding: 12px 20px;
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .rating-option input[type="radio"]:checked + label {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: scale(1.05);
        }

        .rating-option label:hover {
            border-color: #667eea;
            transform: scale(1.02);
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.85em;
            color: #666;
        }

        .submit-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 30px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        #results {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .score-display {
            font-size: 4em;
            color: #667eea;
            font-weight: 700;
            margin: 20px 0;
        }

        .score-fraction {
            font-size: 0.5em;
            color: #666;
        }

        .score-analysis {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 16px;
            margin: 30px 0;
            border: 2px solid #e0e0e0;
        }

        .score-analysis h2 {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
        }

        .score-ranges {
            max-width: 700px;
            margin: 0 auto;
        }

        .score-range-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            margin-bottom: 10px;
            background: white;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            transition: all 0.3s;
        }

        .score-range-item.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .score-range-item .range {
            font-weight: bold;
            font-size: 1.1em;
            min-width: 100px;
            margin-right: 15px;
        }

        .score-range-item .description {
            flex: 1;
            line-height: 1.4;
        }

        .score-range-item.active .range {
            color: white;
        }

        .rating-category {
            padding: 30px;
            border-radius: 16px;
            margin: 20px 0;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .rating-category::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(45deg);
        }

        .strong-leader {
            background: linear-gradient(135deg, #00b09b, #96c93d);
        }

        .developing-leader {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .emerging-leader {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }

        .beginning-leader {
            background: linear-gradient(135deg, #fa709a, #fee140);
        }

        .category-title {
            font-size: 2em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .category-description {
            font-size: 1.1em;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .download-btn {
            background: #28a745;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: background 0.3s;
        }

        .download-btn:hover {
            background: #218838;
        }

        .error {
            color: #dc3545;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .progress-info {
            text-align: center;
            margin-bottom: 20px;
            color: #666;
        }

        .success-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 20px 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            animation: slideInRight 0.5s ease-out;
            font-size: 1.1em;
            max-width: 400px;
        }

        .score-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 1001;
            animation: bounceIn 0.6s ease-out;
            font-size: 1.2em;
            text-align: center;
            min-width: 300px;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: translateX(-50%) scale(0.3);
            }
            50% {
                transform: translateX(-50%) scale(1.05);
            }
            70% {
                transform: translateX(-50%) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateX(-50%) scale(1);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="survey-form">
            <h1>Teacher Leadership Self-Assessment</h1>
            <p class="subtitle">Evaluate your teaching practices and leadership skills</p>
            
            <div class="rating-instructions">
                <h2>Directions for the Self-assessment</h2>
                
                <p style="margin-bottom: 20px;">This self-assessment consists of five sections. Within each section, there are a series of questions in which you are asked to rate yourself on a scale of 0 to 4. Here is the scale.</p>
                
                <h3>I. Rate Each Statement Using the Scale Below:</h3>
                <div class="rating-scale-info">
                    <div class="scale-item">
                        <span class="scale-value">4</span>
                        <span><strong>Always</strong> - This describes me consistently</span>
                    </div>
                    <div class="scale-item">
                        <span class="scale-value">3</span>
                        <span><strong>Often</strong> - This describes me most of the time</span>
                    </div>
                    <div class="scale-item">
                        <span class="scale-value">2</span>
                        <span><strong>Sometimes</strong> - This describes me occasionally</span>
                    </div>
                    <div class="scale-item">
                        <span class="scale-value">1</span>
                        <span><strong>Rarely</strong> - This describes me infrequently</span>
                    </div>
                    <div class="scale-item">
                        <span class="scale-value">0</span>
                        <span><strong>Never</strong> - This does not describe me</span>
                    </div>
                </div>
                
                <h3>II. After Completing the Self-assessment</h3>
                <p>After completing the self-assessment, tally your score (see directions at the end of this document) and take the time to review and reflect on your responses as a way to target your own goals while working through the content of this course.</p>
                
                <h3>III. Scoring</h3>
                <p>After completing the self-assessment, your score will be automatically calculated within and across the sections (e.g., Instructional Leadership, Collaboration and Teamwork, etc.). Your survey and its results will be automatically sent to your UGA email.</p>
                
                <h3>IV. Analyzing the Score on the Self-Assessment</h3>
                <p>Once you receive the results of your self-assessment, examine the range of your scored results to see where you currently are related to your self-reported engagement in the work of being a teacher leader.</p>
                
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                    <strong>Score Range:</strong>
                    <ul style="list-style: none; padding-left: 0;">
                        <li>â€¢ 116-132: Strong teacher leader with well-developed leadership skills</li>
                        <li>â€¢ 95-115: Developing teacher leader with solid foundation and areas for growth</li>
                        <li>â€¢ 70-94: Emerging teacher leader with potential for significant development</li>
                        <li>â€¢ Below 70: Beginning teacher leader who would benefit from focused professional development</li>
                    </ul>
                    <p style="margin-top: 10px;"><strong>Total Score: ___/132</strong></p>
                </div>
                
                <h3>V. Time to Reflect on the Results of the Self-assessment</h3>
                <p>After completing the self-assessment, take the time to review these questions and to reflect about your responses as a way to target your own goals while working through the content of this course and in all probability future courses. Please keep the results of this self-assessment for future use in this course (See Assignment Number 5).</p>
            </div>
            
            <form id="assessmentForm">
                <div class="form-section">
                    <div class="form-group">
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" required>
                        <span class="error" id="name-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                        <span class="error" id="email-error"></span>
                    </div>
                </div>

                <div class="form-section">
                    <div class="progress-info">
                        <p>Complete all 33 questions to receive your personalized leadership assessment</p>
                    </div>
                    <div id="questions-container">
                        <!-- Questions will be added here by JavaScript -->
                    </div>
                </div>

                <button type="submit" class="submit-btn">Submit Assessment</button>
            </form>
        </div>

        <div id="results" style="display: none;">
            <div class="results-header">
                <h1>Your Assessment Results</h1>
                <div class="score-display">
                    <span id="totalScore"></span><span class="score-fraction">/132</span>
                </div>
            </div>
            
            <!-- Score Analysis Table -->
            <div class="score-analysis">
                <h2>Analyzing the Score on the Self-Assessment</h2>
                <div class="score-ranges">
                    <div class="score-range-item" id="range-116-132">
                        <span class="range">116-132:</span>
                        <span class="description">Strong teacher leader with well-developed leadership skills</span>
                    </div>
                    <div class="score-range-item" id="range-95-115">
                        <span class="range">95-115:</span>
                        <span class="description">Developing teacher leader with solid foundation and areas for growth</span>
                    </div>
                    <div class="score-range-item" id="range-70-94">
                        <span class="range">70-94:</span>
                        <span class="description">Emerging teacher leader with potential for significant development</span>
                    </div>
                    <div class="score-range-item" id="range-below-70">
                        <span class="range">Below 70:</span>
                        <span class="description">Beginning teacher leader who would benefit from focused professional development</span>
                    </div>
                </div>
            </div>
            
            <div id="ratingCategory"></div>
            <button class="download-btn" onclick="downloadData()">Download Results as CSV</button>
            <button class="submit-btn" onclick="resetForm()">Take Assessment Again</button>
        </div>
    </div>

    <script>
        // All 33 survey questions
        const allQuestions = [
            "I actively seek out and implement innovative teaching strategies to improve student learning outcomes.",
            "I use data to inform my instructional decisions and adjust my teaching methods accordingly.",
            "I model effective teaching practices for my colleagues through demonstration lessons or peer observations.",
            "I advocate for evidence-based practices and share research findings with my team.",
            "I design and implement assessments that effectively measure student learning and provide actionable feedback.",
            "I differentiate instruction to meet the diverse learning needs of all students in my classroom.",
            "I integrate technology purposefully to enhance student learning and engagement.",
            "I analyze student work collaboratively with colleagues to improve instructional practices.",
            "I lead discussions about curriculum alignment, pacing, and instructional strategies with my team.",
            "I provide specific, actionable feedback to colleagues about their instructional practices.",
            "I create and maintain professional learning communities within my school.",
            "I mentor new teachers and support their professional growth.",
            "I participate in educational research to improve teaching practices.",
            "I facilitate workshops or professional development sessions for colleagues.",
            "I collaborate with administrators to improve school-wide instructional practices.",
            "I use student voice and feedback to inform my teaching decisions.",
            "I create inclusive classroom environments that celebrate diversity.",
            "I develop and share resources with colleagues to support student learning.",
            "I engage families and communities in supporting student achievement.",
            "I regularly reflect on my practice and seek feedback for improvement.",
            "I stay current with educational trends and research in my field.",
            "I advocate for students' needs at school and district levels.",
            "I use formative assessment strategies to guide daily instruction.",
            "I model lifelong learning for students and colleagues.",
            "I contribute to curriculum development and improvement initiatives.",
            "I build positive relationships with all students to support their growth.",
            "I collaborate across grade levels or departments to ensure continuity.",
            "I use culturally responsive teaching practices in my classroom.",
            "I support colleagues in implementing new instructional strategies.",
            "I analyze school-wide data to identify areas for improvement.",
            "I promote a growth mindset culture in my classroom and school.",
            "I engage in action research to solve classroom challenges.",
            "I coordinate with support staff to meet all students' needs."
        ];

        let responses = [];

        // Generate all questions when page loads
        window.addEventListener('DOMContentLoaded', function() {
            generateQuestions();
            setupFormHandler();
        });

        function generateQuestions() {
            const container = document.getElementById('questions-container');
            
            // Section 1: Instructional Leadership (Questions 1-11)
            const section1 = document.createElement('div');
            section1.innerHTML = '<div class="section-header">Section 1: Instructional Leadership</div>';
            container.appendChild(section1);
            
            for (let i = 0; i < 11; i++) {
                section1.appendChild(createQuestion(allQuestions[i], i + 1));
            }
            
            // Section 2: Collaboration and Teamwork (Questions 12-21)
            const section2 = document.createElement('div');
            section2.innerHTML = '<div class="section-header">Section 2: Collaboration and Teamwork</div>';
            container.appendChild(section2);
            
            for (let i = 11; i < 21; i++) {
                section2.appendChild(createQuestion(allQuestions[i], i + 1));
            }
            
            // Section 3: Communication and Influence (Questions 22-25)
            const section3 = document.createElement('div');
            section3.innerHTML = '<div class="section-header">Section 3: Communication and Influence</div>';
            container.appendChild(section3);
            
            for (let i = 21; i < 25; i++) {
                section3.appendChild(createQuestion(allQuestions[i], i + 1));
            }
            
            // Section 4: Professional Growth and Learning (Questions 26-29)
            const section4 = document.createElement('div');
            section4.innerHTML = '<div class="section-header">Section 4: Professional Growth and Learning</div>';
            container.appendChild(section4);
            
            for (let i = 25; i < 29; i++) {
                section4.appendChild(createQuestion(allQuestions[i], i + 1));
            }
            
            // Section 5: Mentoring, Coaching, and Supporting Others (Questions 30-33)
            const section5 = document.createElement('div');
            section5.innerHTML = '<div class="section-header">Section 5: Mentoring, Coaching, and Supporting Others</div>';
            container.appendChild(section5);
            
            for (let i = 29; i < 33; i++) {
                section5.appendChild(createQuestion(allQuestions[i], i + 1));
            }
        }

        function createQuestion(questionText, questionNum) {
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';
            questionDiv.innerHTML = `
                <p class="question-text"><span class="question-number">${questionNum}.</span> ${questionText}</p>
                <div class="rating-scale">
                    <div class="rating-option">
                        <input type="radio" id="q${questionNum}_0" name="q${questionNum}" value="0" required>
                        <label for="q${questionNum}_0">0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="q${questionNum}_1" name="q${questionNum}" value="1">
                        <label for="q${questionNum}_1">1</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="q${questionNum}_2" name="q${questionNum}" value="2">
                        <label for="q${questionNum}_2">2</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="q${questionNum}_3" name="q${questionNum}" value="3">
                        <label for="q${questionNum}_3">3</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="q${questionNum}_4" name="q${questionNum}" value="4">
                        <label for="q${questionNum}_4">4</label>
                    </div>
                </div>
                <div class="scale-labels">
                    <span>Never</span>
                    <span>Always</span>
                </div>
            `;
            return questionDiv;
        }

        function setupFormHandler() {
            const form = document.getElementById('assessmentForm');
            form.addEventListener('submit', handleSubmit);
        }

        function handleSubmit(e) {
            e.preventDefault();
            
            // Clear previous errors
            document.querySelectorAll('.error').forEach(err => err.textContent = '');
            
            // Validate form
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            
            if (!name) {
                document.getElementById('name-error').textContent = 'Please enter your name';
                return;
            }
            
            if (!email || !isValidEmail(email)) {
                document.getElementById('email-error').textContent = 'Please enter a valid email';
                return;
            }
            
            // Calculate total score
            let totalScore = 0;
            const answers = {};
            
            // Calculate section scores
            const sectionScores = {
                'Instructional Leadership': 0,
                'Collaboration and Teamwork': 0,
                'Communication and Influence': 0,
                'Professional Growth and Learning': 0,
                'Mentoring, Coaching, and Supporting Others': 0
            };
            
            for (let i = 1; i <= 33; i++) {
                const selectedValue = document.querySelector(`input[name="q${i}"]:checked`);
                if (selectedValue) {
                    const score = parseInt(selectedValue.value);
                    answers[`q${i}`] = score;
                    totalScore += score;
                    
                    // Add to section scores
                    if (i <= 11) sectionScores['Instructional Leadership'] += score;
                    else if (i <= 21) sectionScores['Collaboration and Teamwork'] += score;
                    else if (i <= 25) sectionScores['Communication and Influence'] += score;
                    else if (i <= 29) sectionScores['Professional Growth and Learning'] += score;
                    else sectionScores['Mentoring, Coaching, and Supporting Others'] += score;
                } else {
                    alert(`Please answer question ${i}`);
                    return;
                }
            }
            
            // Store response data
            const responseData = {
                timestamp: new Date().toISOString(),
                name: name,
                email: email,
                ...answers,
                totalScore: totalScore,
                ...sectionScores
            };
            
            responses.push(responseData);
            
            // Send to Google Sheets if configured
            sendToGoogleSheets(responseData);
            
            // Show success message and animate to results
            showSuccessMessage(name);
            
            // Animate score calculation
            setTimeout(() => {
                showResults(totalScore, sectionScores);
            }, 500);
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function showSuccessMessage(name) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-notification';
            successDiv.innerHTML = `
                <strong>âœ“ Assessment Submitted Successfully!</strong><br>
                Thank you, ${name}. Your responses have been recorded.<br>
                <small>Calculating your leadership score...</small>
            `;
            
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                successDiv.style.animation = 'slideOutRight 0.5s ease-in';
                setTimeout(() => successDiv.remove(), 500);
            }, 4000);
        }

        function showResults(score, sectionScores) {
            // Hide form and show results
            document.getElementById('survey-form').style.display = 'none';
            document.getElementById('results').style.display = 'block';
            
            // Animate score counting
            let currentScore = 0;
            const scoreElement = document.getElementById('totalScore');
            const increment = Math.ceil(score / 50);
            
            const countInterval = setInterval(() => {
                currentScore += increment;
                if (currentScore >= score) {
                    currentScore = score;
                    clearInterval(countInterval);
                    
                    // Highlight appropriate range
                    highlightScoreRange(score);
                    
                    // Show final notification
                    showScoreNotification(score);
                }
                scoreElement.textContent = currentScore;
            }, 30);
            
            // Determine and show category
            let category, title, description;
            
            if (score >= 116) {
                category = 'strong-leader';
                title = 'Strong Teacher Leader';
                description = 'You demonstrate exceptional leadership skills! Your score indicates you have well-developed leadership abilities across all areas. You consistently implement innovative strategies, use data-driven decisions, and actively support your colleagues\' professional growth.';
            } else if (score >= 95) {
                category = 'developing-leader';
                title = 'Developing Teacher Leader';
                description = 'You are a developing teacher leader with a solid foundation! Your score shows you have strong skills in many areas with opportunities for continued growth. Consider expanding your leadership influence by mentoring colleagues or leading professional development initiatives.';
            } else if (score >= 70) {
                category = 'emerging-leader';
                title = 'Emerging Teacher Leader';
                description = 'You are an emerging teacher leader with significant potential for development! Focus on strengthening your data-driven instruction, increasing collaboration with colleagues, and seeking opportunities to share your growing expertise.';
            } else {
                category = 'beginning-leader';
                title = 'Beginning Teacher Leader';
                description = 'You are at the beginning of your teacher leadership journey! This is an exciting opportunity for focused professional development. Start by identifying one or two areas where you feel most comfortable and gradually expand your leadership practices.';
            }
            
            const categoryDiv = document.getElementById('ratingCategory');
            categoryDiv.className = `rating-category ${category}`;
            categoryDiv.innerHTML = `
                <h2 class="category-title">${title}</h2>
                <p class="category-description">${description}</p>
            `;
            
            // Add section scores display
            const sectionScoresHTML = `
                <div class="section-scores" style="margin-top: 30px;">
                    <h2 style="text-align: center; color: #333; margin-bottom: 20px;">Section Scores Breakdown</h2>
                    <div class="section-score">
                        <h3>Section 1: Instructional Leadership</h3>
                        <p style="font-size: 1.5em; color: #667eea;">${sectionScores['Instructional Leadership']}/44</p>
                    </div>
                    <div class="section-score">
                        <h3>Section 2: Collaboration and Teamwork</h3>
                        <p style="font-size: 1.5em; color: #667eea;">${sectionScores['Collaboration and Teamwork']}/40</p>
                    </div>
                    <div class="section-score">
                        <h3>Section 3: Communication and Influence</h3>
                        <p style="font-size: 1.5em; color: #667eea;">${sectionScores['Communication and Influence']}/16</p>
                    </div>
                    <div class="section-score">
                        <h3>Section 4: Professional Growth and Learning</h3>
                        <p style="font-size: 1.5em; color: #667eea;">${sectionScores['Professional Growth and Learning']}/16</p>
                    </div>
                    <div class="section-score">
                        <h3>Section 5: Mentoring, Coaching, and Supporting Others</h3>
                        <p style="font-size: 1.5em; color: #667eea;">${sectionScores['Mentoring, Coaching, and Supporting Others']}/16</p>
                    </div>
                </div>
            `;
            
            categoryDiv.insertAdjacentHTML('afterend', sectionScoresHTML);
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function highlightScoreRange(score) {
            setTimeout(() => {
                if (score >= 116) {
                    document.getElementById('range-116-132').classList.add('active');
                } else if (score >= 95) {
                    document.getElementById('range-95-115').classList.add('active');
                } else if (score >= 70) {
                    document.getElementById('range-70-94').classList.add('active');
                } else {
                    document.getElementById('range-below-70').classList.add('active');
                }
            }, 1500);
        }

        function showScoreNotification(score) {
            setTimeout(() => {
                const notification = document.createElement('div');
                notification.className = 'score-notification';
                
                let category;
                if (score >= 116) category = 'Strong Teacher Leader';
                else if (score >= 95) category = 'Developing Teacher Leader';
                else if (score >= 70) category = 'Emerging Teacher Leader';
                else category = 'Beginning Teacher Leader';
                
                notification.innerHTML = `
                    <strong style="font-size: 1.5em;">ðŸ“Š Assessment Complete!</strong><br>
                    <div style="margin-top: 10px;">Your Leadership Score: <strong style="font-size: 2em;">${score}/132</strong></div>
                    <div style="margin-top: 5px; font-size: 0.9em;">Category: ${category}</div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transition = 'opacity 0.5s ease-in';
                    setTimeout(() => notification.remove(), 500);
                }, 5000);
            }, 2000);
        }

        function downloadData() {
            if (responses.length === 0) {
                alert('No data to download');
                return;
            }
            
            const headers = ['Timestamp', 'Name', 'Email'];
            for (let i = 1; i <= 33; i++) {
                headers.push(`Q${i}`);
            }
            headers.push('Total Score', 'Category');
            headers.push('Instructional Leadership', 'Collaboration and Teamwork', 
                        'Communication and Influence', 'Professional Growth and Learning',
                        'Mentoring, Coaching, and Supporting Others');
            
            const csvContent = [
                headers.join(','),
                ...responses.map(r => {
                    const row = [r.timestamp, `"${r.name}"`, r.email];
                    for (let i = 1; i <= 33; i++) {
                        row.push(r[`q${i}`] || 0);
                    }
                    row.push(r.totalScore);
                    
                    // Add category
                    let category;
                    if (r.totalScore >= 116) category = 'Strong Teacher Leader';
                    else if (r.totalScore >= 95) category = 'Developing Teacher Leader';
                    else if (r.totalScore >= 70) category = 'Emerging Teacher Leader';
                    else category = 'Beginning Teacher Leader';
                    row.push(`"${category}"`);
                    
                    // Add section scores
                    row.push(r['Instructional Leadership'] || 0);
                    row.push(r['Collaboration and Teamwork'] || 0);
                    row.push(r['Communication and Influence'] || 0);
                    row.push(r['Professional Growth and Learning'] || 0);
                    row.push(r['Mentoring, Coaching, and Supporting Others'] || 0);
                    
                    return row.join(',');
                })
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `teacher_assessment_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }

        function resetForm() {
            document.getElementById('assessmentForm').reset();
            document.getElementById('results').style.display = 'none';
            document.getElementById('survey-form').style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Optional Google Sheets Integration
        function sendToGoogleSheets(data) {
            // Replace with your Google Apps Script Web App URL
            const GOOGLE_SCRIPT_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE';
            
            if (GOOGLE_SCRIPT_URL.includes('YOUR_GOOGLE_APPS_SCRIPT_URL_HERE')) {
                console.log('Google Sheets integration not configured');
                return;
            }
            
            const formData = new FormData();
            Object.keys(data).forEach(key => {
                formData.append(key, data[key]);
            });
            
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(result => {
                console.log('Data saved to Google Sheets:', result);
                if (result.result === 'success') {
                    console.log('Results will be emailed to:', data.email);
                }
            })
            .catch(error => {
                console.error('Error saving to Google Sheets:', error);
            });
        }
    </script>
</body>
</html>
